(window.webpackJsonp_test=window.webpackJsonp_test||[]).push([[7],{313:function(e,t,n){"use strict";var o=n(3),a=n(0),r=function(){};function i(e){var t=Object(a.useState)(e),n=t[0],r=t[1],i=n;return{state:n,setStateWrap:function(e,t){return r((function(n){return i=Object(o.a)(Object(o.a)({},n),e),t&&t(i),i})),i},getState:function(){return i}}}n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return s}));var c=function(){function e(e){this.props=e,this.dispatch=r}return e.prototype.useReducer=function(e,t){var n=Object(a.useReducer)(e,t),o=n[0],r=n[1];return this.dispatch=r,this.state=o,{state:o,dispatch:r}},e}();function l(e,t){return Object(a.useMemo)((function(){return new e(t)}),[])}function s(e,t){return Object(a.useMemo)((function(){return new e(t)}),[])}},314:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){function e(){}return e.Inject=function(e){return function(t,n){if("function"!=typeof e)throw new TypeError("Only class is injectable.");if(!e.__injectable)throw new TypeError("Class "+e.name+" is not injectable.");t[n]=new e}},e.Injectable=function(){return function(e){e.__injectable=!0}},e}()},324:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var o=n(3),a=n(411),r=n.n(a),i=n(520),c=n(669),l=n(908),s=n(913),u=n(314),p=n(909),m=function(){function t(){this._httpClient=r.a.create()}return t.prototype.createAuthHeaders=function(){var e={token:""},t=localStorage.getItem("TOKENINFO");return t&&(e.token=t),e},t.prototype.getRootUrl=function(t){e.env.MAIN;return~t.indexOf("VerifyCode")?"http://192.168.0.252:7008/api":e.env.MAIN},t.prototype._makeRequest=function(e,t,n,o){var a;return void 0===o&&(o="json"),a="post"==e||"put"==e?this._httpClient[e](this.getRootUrl(t)+t,n,{headers:this.createAuthHeaders(),responseType:o,timeout:3e5}):this._httpClient[e](this.getRootUrl(t)+t,{params:n,headers:this.createAuthHeaders(),responseType:o,timeout:3e5}),new i.a((function(e){a.then((function(t){e.next(t.data),e.complete()})).catch((function(t){e.error(t),e.complete()}))}))},t.prototype.get=function(e,t){var n=this;return this._makeRequest("get",e,t).pipe(Object(l.a)((function(e){return n.dealWithError(e)})),Object(s.a)(this.handleError))},t.prototype.post=function(e,t){var n=this;return this._makeRequest("post",e,t).pipe(Object(l.a)((function(e){return n.dealWithError(e)})),Object(s.a)(this.handleError))},t.prototype.put=function(e,t){var n=this;return this._makeRequest("put",e,t).pipe(Object(l.a)((function(e){return n.dealWithError(e)})),Object(s.a)(this.handleError))},t.prototype.delete=function(e,t){var n=this;return this._makeRequest("delete",e,t).pipe(Object(l.a)((function(e){return n.dealWithError(e)})),Object(s.a)(this.handleError))},t.prototype.getDownload=function(e,t){var n=this;return this._makeRequest("get",e,t,"arraybuffer").pipe(Object(l.a)((function(e){return n.dealWithError(e)})),Object(s.a)(this.handleError))},t.prototype.postDownload=function(e,t){var n=this;return this._makeRequest("post",e,t,"arraybuffer").pipe(Object(l.a)((function(e){return n.dealWithError(e)})),Object(s.a)(this.handleError))},t.prototype.handleError=function(e){if(void 0===e||"ECONNABORTED"===e.code)e="服务请求超时";else if(e.response){var t=e.response.status;t&&parseInt(t)>=500?e="服务器错误，请联系管理员。":401===t?(localStorage.getItem("TOKENINFO"),e="登录失效，请重新登录。"):t&&parseInt(t)>=400&&(e="页面找不到了，请联系管理员。")}else"Network Error"==e.message&&(e="请检查网络。");return p.a({PROJECT:"fchH5",ERROR:e}),Object(c.a)(e)},t.prototype.dealWithError=function(e){if((e=e).status)return e.total||0==e.total?{total:e.total,data:e.data}:0==e.data||e.data?e.data:e;if(401===e.code||401===e.StatusCode)throw"登录失效，请重新登录！";throw e.message},t=Object(o.c)([u.a.Injectable(),Object(o.f)("design:paramtypes",[])],t)}()}).call(this,n(212))},704:function(e,t,n){e.exports={main:"login-component__main--37U0T",stage:"login-component__stage--MU8JX",left:"login-component__left--g-deV",leftCover:"login-component__leftCover--1dsPn",right:"login-component__right--eCBKT",welcome:"login-component__welcome--2FrVw",siteTitleBox:"login-component__siteTitleBox--39gbt",loginBox:"login-component__loginBox--2zjZa",loginBtn:"login-component__loginBtn--3l_hV",formFlexItem:"login-component__formFlexItem--r1DcR",vcodeInput:"login-component__vcodeInput--SvN-l",vcodeBox:"login-component__vcodeBox--2WVJ2","login-form":"login-component__login-form--2oYLE",loginForm:"login-component__login-form--2oYLE","ant-form-item":"login-component__ant-form-item--NG2ve",antFormItem:"login-component__ant-form-item--NG2ve","ant-input":"login-component__ant-input--3h7hi",antInput:"login-component__ant-input--3h7hi",root:"login-component__root--1JtBP","custom-layout":"login-component__custom-layout--2Jh6-",customLayout:"login-component__custom-layout--2Jh6-","ant-layout":"login-component__ant-layout--3xcQH",antLayout:"login-component__ant-layout--3xcQH","ant-layout-has-sider":"login-component__ant-layout-has-sider--1BFV3",antLayoutHasSider:"login-component__ant-layout-has-sider--1BFV3","ant-spin-nested-loading":"login-component__ant-spin-nested-loading--1lxt2",antSpinNestedLoading:"login-component__ant-spin-nested-loading--1lxt2","custom-layout-spin":"login-component__custom-layout-spin--24lce",customLayoutSpin:"login-component__custom-layout-spin--24lce","ant-spin-container":"login-component__ant-spin-container--2n06m",antSpinContainer:"login-component__ant-spin-container--2n06m","ant-spin":"login-component__ant-spin--313c0",antSpin:"login-component__ant-spin--313c0","ant-spin-spinning":"login-component__ant-spin-spinning--12A9Q",antSpinSpinning:"login-component__ant-spin-spinning--12A9Q","ant-tree":"login-component__ant-tree--2JbLX",antTree:"login-component__ant-tree--2JbLX","ant-tree-node-content-wrapper":"login-component__ant-tree-node-content-wrapper--3cUEz",antTreeNodeContentWrapper:"login-component__ant-tree-node-content-wrapper--3cUEz",h40:"login-component__h40--3JSkQ","push-search-item":"login-component__push-search-item--1Kixc",pushSearchItem:"login-component__push-search-item--1Kixc",label:"login-component__label--207Zc","ant-btn":"login-component__ant-btn--3mhIX",antBtn:"login-component__ant-btn--3mhIX","form-item":"login-component__form-item--1TGKH",formItem:"login-component__form-item--1TGKH","other-search-button-item":"login-component__other-search-button-item--3EWtU",otherSearchButtonItem:"login-component__other-search-button-item--3EWtU","ant-radio-group":"login-component__ant-radio-group--288Es",antRadioGroup:"login-component__ant-radio-group--288Es"}},914:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(3),i=n(314),c=function(){},l=n(324),s=n(520),u=n(900),p=function(e){function t(){return e.call(this)||this}var n;return Object(r.d)(t,e),t.prototype.login=function(e){return s.a.create((function(e){e.next({token:"loginSuccess",status:!0}),e.complete()})).pipe(Object(u.a)(500))},Object(r.c)([i.a.Inject(l.a),Object(r.f)("design:type","function"==typeof(n=void 0!==l.a&&l.a)?n:Object)],t.prototype,"requestService",void 0),t=Object(r.c)([i.a.Injectable(),Object(r.f)("design:paramtypes",[])],t)}(c),m=n(293),f={SET_LOADING_LOADING:"SET_LOADING_LOADING"};function d(e){return{type:f.SET_LOADING_LOADING,payload:e}}Object(m.a)("LOGIN")(f);var _=n(236),g=n.n(_),h=(n(706),n(313)),b=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.useRefs=function(){return{leftRef:Object(o.useRef)(null),leftCoverRef:Object(o.useRef)(null)}},n.handleSubmit=function(e){e.preventDefault(),n.dispatch(d(!0));var t=(0,n.props.form.getFieldsValue)(),o={username:t.username,password:t.password,vcode:t.vcode,vcodeKey:"vcodeKey"};n.handleLogin(o)},n.handleLogin=function(e){return n.loginService.login(e).subscribe((function(){g.a.success("登录成功"),n.dispatch(d(!1)),n.props.history.push("/home")}))},n}var n;return Object(r.d)(t,e),Object(r.c)([i.a.Inject(p),Object(r.f)("design:type","function"==typeof(n=void 0!==p&&p)?n:Object)],t.prototype,"loginService",void 0),t}(h.a),v=n(704),E=n.n(v),O=n(916),y=n(917),j=n(918),I=n(347),N=n.n(I),w=(n(346),n(337)),x=n.n(w),R=(n(357),n(312)),S=n.n(R),L=(n(316),n(341)),T=n.n(L),B=(n(340),{loginLoading:!1});function C(e,t){void 0===e&&(e=B);var n=t.type,o=t.payload;switch(n){case f.SET_LOADING_LOADING:return Object(r.a)(Object(r.a)({},e),{loginLoading:o});default:return e}}n(60);var k=function(e){var t=Object(h.d)(b,e),n=t.useReducer(C,B).state,r=t.useRefs(),i=r.leftRef,c=r.leftCoverRef,l=Object(o.useCallback)((function(){var e="0 0 "+window.innerHeight+"px "+i.current.clientWidth/2+"px";c.current.style.borderWidth=e}),[]);return Object(o.useEffect)((function(){return l(),window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}}),[]),a.a.createElement("div",{className:E.a.main},a.a.createElement("section",{className:E.a.left,ref:i},a.a.createElement("div",{className:E.a.stage}),a.a.createElement("div",{className:E.a.leftCover,ref:c})),a.a.createElement("section",{className:E.a.right},a.a.createElement("div",null,a.a.createElement("p",{className:E.a.welcome},"Hello!"),a.a.createElement("p",{className:E.a.siteTitleBox},"欢迎登录",a.a.createElement("strong",null,"某某后台管理系统"))),a.a.createElement("div",{className:E.a.loginBox},a.a.createElement(T.a,{className:"login-form",onFinish:t.handleSubmit,initialValues:{checked:!0}},a.a.createElement(T.a.Item,{rules:[{required:!0,message:"请输入用户名"}]},a.a.createElement(N.a,{prefix:a.a.createElement(O.a,null),placeholder:"请输入用户名"})),a.a.createElement(T.a.Item,{rules:[{required:!0,message:"请输入登录密码"}]},a.a.createElement(N.a,{prefix:a.a.createElement(y.a,null),type:"password",placeholder:"请输入登录密码"})),a.a.createElement(T.a.Item,{className:E.a.formFlexItem,rules:[{required:!0,message:"请输入验证码"}]},a.a.createElement(N.a,{prefix:a.a.createElement(j.a,null),className:E.a.vcodeInput,placeholder:"请输入验证码"}),a.a.createElement("div",{className:E.a.vcodeBox},"验证码")),a.a.createElement(T.a.Item,{className:E.a.formFlexItem,rules:[{required:!0,message:"请输入用户名"}]},a.a.createElement(x.a,null,"七天内免登录"),")",a.a.createElement("a",null,"忘记密码")),a.a.createElement(T.a.Item,null,a.a.createElement(S.a,{type:"primary",htmlType:"submit",loading:n.loginLoading,className:E.a.loginBtn},"登录"),a.a.createElement("a",null,"还没有账号？点击注册"))))))};t.default=k}}]);